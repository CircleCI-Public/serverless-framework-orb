# How to author commands: https://circleci.com/docs/2.0/reusing-config/#authoring-reusable-commands
description: >
  Install and authenticate with the Serverless CLI.
parameters:
  provider:
    type: enum
    enum: ["", "AWS", "azure", "tencent", "google", "knative", "alibaba", "cloudflare", "fn", "kubeless", "openwhisk", "spotinist"]
    default: "AWS"
  version:
    type: string
    description: Specify the version of the Serverless Framework CLI to install. By default, the latest version will be used.
    default: ""
steps:
  - run:
      name: Provider Check
      environment:
        SLS_ORB_PROVIDER_PARAM: << parameters.provider >>
      command: <<include(scripts/provider-check.sh)>>
  - run:
      name: Install Serverless CLI
      environment:
        ORB_PARAM_SERVERLESS_VERSION: <<parameters.version>>
      command: <<include(scripts/install.sh)>>
